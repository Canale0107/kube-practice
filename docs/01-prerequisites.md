# 前提知識

Kubernetesを学ぶ前に、いくつかの基礎知識があると理解が深まります。この章では、必要な前提知識を説明します。

## コンテナとは何か

### 従来の仮想化との違い

**従来の仮想化（VM）:**
```
┌─────────────────────────────────┐
│      Host OS (Linux/Windows)    │
│  ┌──────────┐  ┌──────────┐     │
│  │   VM 1   │  │   VM 2   │     │
│  │  Guest   │  │  Guest   │     │
│  │   OS     │  │   OS     │     │
│  │  App     │  │  App     │     │
│  └──────────┘  └──────────┘     │
└─────────────────────────────────┘
```
- 各VMにOS全体が必要
- リソース消費が多い
- 起動が遅い

**コンテナ:**
```
┌─────────────────────────────────┐
│      Host OS (Linux/Windows)    │
│  ┌──────────┐  ┌──────────┐     │
│  │Container1│  │Container2│     │
│  │  App     │  │  App     │     │
│  └──────────┘  └──────────┘     │
└─────────────────────────────────┘
```
- OSを共有
- リソース消費が少ない
- 起動が速い

### コンテナの特徴

1. **軽量**
   - OS全体を含まない
   - 必要なライブラリだけを含む

2. **ポータブル**
   - どこでも同じように動く
   - 「開発では動いたのに本番で動かない」を防ぐ

3. **隔離**
   - 各コンテナは独立した環境
   - 他のコンテナに影響を与えない

4. **一貫性**
   - 同じイメージから作られたコンテナは同じ動作
   - 再現性が高い

### コンテナイメージとコンテナ

- **コンテナイメージ**: アプリケーションとその依存関係を含む「テンプレート」
- **コンテナ**: イメージから作成された「実行中のインスタンス」

例：
- `nginx:latest` = イメージ（テンプレート）
- イメージから起動した実行中のプロセス = コンテナ

## Dockerの基礎

Dockerは、コンテナを作成・実行・管理するためのツールです。

### 主要なコマンド

```bash
# イメージを取得（Pull）
docker pull nginx:latest

# コンテナを起動
docker run -d -p 8080:80 nginx:latest

# 実行中のコンテナを確認
docker ps

# コンテナのログを確認
docker logs <container-id>

# コンテナを停止
docker stop <container-id>

# コンテナを削除
docker rm <container-id>
```

### Dockerfile

アプリケーションをコンテナイメージにパッケージ化するための設定ファイル：

```dockerfile
FROM nginx:latest
COPY index.html /usr/share/nginx/html/
EXPOSE 80
```

### Docker Compose

複数のコンテナをまとめて管理：

```yaml
version: '3'
services:
  web:
    image: nginx:latest
    ports:
      - "8080:80"
```

> **このプロジェクトでは**: Dockerの詳細な知識は必須ではありませんが、コンテナの概念を理解していると、Kubernetesの理解が深まります。

## 必要な知識レベル

### 必須

- **コマンドライン操作の基礎**
  - `cd`, `ls`, `cat`などの基本的なコマンド
  - ファイルの編集（エディタの使用）

- **YAMLファイルの読み方**
  - Kubernetesの設定はYAML形式
  - インデント（字下げ）が重要
  - 基本的な構造を理解できればOK

### 推奨（なくても学習可能）

- **コンテナの概念**
  - 上記で説明した内容
  - なくても学習は進められますが、理解が深まります

- **基本的なネットワーク知識**
  - IPアドレス、ポートの概念
  - なくても学習は可能です

- **Linuxの基礎**
  - ファイルシステム、プロセスなどの概念
  - macOSでも基本的なコマンドは同じです

### 不要な知識

- **Kubernetesの詳細な知識**
  - これから学びます！

- **クラウドの詳細な知識**
  - ローカル環境で学習するため不要です

- **プログラミングの高度な知識**
  - 基本的な概念があれば十分です

## YAMLファイルの基礎

Kubernetesの設定はYAML形式で書きます。基本的な構文を理解しましょう。

### 基本構造

```yaml
# コメントは # で始まる

# キー: 値
name: nginx
version: 1.0

# リスト（配列）
ports:
  - 80
  - 443

# ネスト（入れ子）
metadata:
  name: nginx
  labels:
    app: nginx
```

### 重要なポイント

1. **インデント（字下げ）が重要**
   - スペース2つまたは4つで統一
   - タブは使わない（エラーの原因）

2. **コロン（:）の後にスペース**
   ```yaml
   name: nginx  # ✅ 正しい
   name:nginx   # ❌ エラー
   ```

3. **ハイフン（-）でリスト項目**
   ```yaml
   items:
     - item1
     - item2
   ```

### 実際の例（KubernetesのDeployment）

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx
spec:
  replicas: 1
  selector:
    matchLabels:
      app: nginx
```

この構造を理解できれば、Kubernetesのマニフェストファイルを読むことができます。

## コマンドラインの基礎

### 基本的なコマンド

```bash
# 現在のディレクトリを確認
pwd

# ディレクトリを移動
cd /path/to/directory
cd ..  # 親ディレクトリへ

# ファイル一覧
ls
ls -la  # 詳細表示

# ファイルの内容を表示
cat filename.txt

# ファイルを編集（エディタによって異なる）
nano filename.txt
vim filename.txt
code filename.txt  # VS Code

# コマンドのヘルプ
kubectl --help
kubectl get --help
```

### パイプ（|）とリダイレクト

```bash
# パイプ: 前のコマンドの出力を次のコマンドに渡す
kubectl get pods | grep nginx

# リダイレクト: 出力をファイルに保存
kubectl get pods > pods.txt

# 両方組み合わせ
kubectl get pods | grep nginx > nginx-pods.txt
```

## このプロジェクトで使うツール

### 1. Docker

- **役割**: コンテナを実行する
- **このプロジェクトでの使用**: kindがKubernetesクラスタをDockerコンテナ内に作成

### 2. kind

- **役割**: ローカルでKubernetesクラスタを作成
- **このプロジェクトでの使用**: 学習用のクラスタを作成・管理

### 3. kubectl

- **役割**: Kubernetesを操作するコマンドラインツール
- **このプロジェクトでの使用**: すべての操作に使用

## よくある質問

### Q: Dockerの詳細な知識は必要ですか？

A: 必須ではありません。コンテナの概念（「軽量な仮想化」「どこでも動く」）を理解していれば十分です。詳細は必要に応じて学べます。

### Q: YAMLファイルを書けますか？

A: このプロジェクトでは、既存のYAMLファイルを読むことができれば十分です。必要に応じて編集しますが、基本的な構造を理解していれば問題ありません。

### Q: Linuxの知識は必要ですか？

A: 基本的なコマンド（`ls`, `cd`, `cat`など）が使えれば十分です。macOSでも同じコマンドが使えます。

### Q: プログラミングの知識は必要ですか？

A: 必須ではありません。設定ファイル（YAML）を読んで、コマンドを実行できれば学習を進められます。

## 準備ができたら

前提知識を確認したら、次は環境のセットアップに進みましょう。

**次のドキュメント**: [セットアップガイド](./02-setup.md)

---

**目次に戻る**: [README](./README.md)
